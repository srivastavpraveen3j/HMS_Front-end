<div class="form-meta">
  <div class="header">
    <h2>PO List</h2>
    <!-- <button class="list-cases-btn"  routerLinkActive="router-link-active" >Add New Cases</button> -->
    <!-- <button
      class="list-cases-btn"
      [routerLink]="['/inventorylayout/purchaseordergeneration']"
      routerLinkActive="router-link-active"
      *ngIf="userPermissions.create"
    >
      ADD NEW PO
    </button> -->
  </div>


  <div class="top-bar p-3">
  <form [formGroup]="filterForm" class="top-bar p-3">
    <input type="text" placeholder="Search by POnumber or Vendor Name" formControlName="searchText" />
  </form>
</div>

  <div class="filters d-flex align-items-center">
    <label class="m-3">
      <input
        type="radio"
        name="filter"
        value="today"
        [(ngModel)]="activeFilter"
        (change)="applyFilters()"
        checked
      />
      TODAY'S
    </label>

    <label class="m-3">
      <input
        type="radio"
        name="filter"
        value="dateRange"
        [(ngModel)]="activeFilter"
        (change)="applyFilters()"
      />
      Date Range
    </label>

    <!-- Date Inputs Visible Only for Date Range -->
    <input
      *ngIf="activeFilter === 'dateRange'"
      type="date"
      [(ngModel)]="startDate"
      (change)="applyFilters()"
      class="form-control mx-2"
    />
    <input
      *ngIf="activeFilter === 'dateRange'"
      type="date"
      [(ngModel)]="endDate"
      (change)="applyFilters()"
      class="form-control mx-2"
    />
  </div>

@if(purchaseOrders.length === 0){
   <app-loader [patientData]="purchaseOrders" [title]="module" [activeFilter]="activeFilter" [startDate]="startDate"
    [endDate]="endDate"></app-loader>
}@else{

     <div class="alert alert-danger text-center mt-3" *ngIf="!userPermissions.read">
    ðŸš« You do not have access to read {{module}} list.
  </div>
   <div class="mt-5" >
    <table
      class="table table-bordered table-hover align-middle diagnosis-table"
    >
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>PO Number</th>
          <th>Vendor</th>
          <th>RFQ Name</th>
          <th>Order Date</th>
          <th>Status</th>
          <th>Total Amount</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let po of purchaseOrders; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ po.poNumber }}</td>
          <td>{{ po?.vendor?.name }}</td>
          <td>{{ po?.rfq?.number }}</td>
          <td>{{ po.createdAt | date }}</td>
          <td>
            <button
              class="btn btn-sm"
              [ngClass]="{
                'bg-success text-white': po.potogrn === 'grngiven',
                'bg-warning text-dark': po.potogrn === 'pending',
                'bg-danger text-white': po.potogrn === 'rejectwholepo'
              }"
            >
              {{ po.potogrn }}
            </button>
          </td>
          <td>{{ po.total | indianCurrency}}</td>
          <!-- <td>
          <button class="btn btn-sm btn-info">View</button>
        </td> -->
          <td>
            <i
              class="fa-solid fa-eye action-btn"
              [routerLink]="[
                '/inventorylayout/purchaseordergeneration/view',
                po._id
              ]"
            ></i>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination d-flex justify-content-center align-items-center my-3">
    <button
      class="pagination-btn btn btn-primary mx-2"
      (click)="previousPage()"
      [disabled]="currentPage === 1"
    >
      Previous
    </button>
    <span>Page {{ currentPage }} of {{ totalPages }}</span>
    <button
      class="pagination-btn btn btn-primary mx-2"
      (click)="nextPage()"
      [disabled]="currentPage === totalPages"
    >
      Next
    </button>
  </div>
  </div>


}


</div>
