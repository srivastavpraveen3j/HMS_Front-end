<div class="from-meta">

<div #pdfFullContent>
<div class="card p-4 mb-4">
  <div class="d-flex justify-content-between align-items-center flex-wrap">
    <h2 class="mb-0">MEDICINE STOCK PHARMA REPORTS{{ subTitle }}</h2>
    <div class="filter-tabs">
      <div class="d-flex gap-2 mt-3 mt-md-0 flex-wrap">
        <button
          type="button"
          class="btn btn-dark"
          [ngClass]="{ active: selectedRange === 'today' }"
          (click)="selectRange('today')"
        >
          Today
        </button>
        <button
          type="button"
          class="btn btn-dark"
          [ngClass]="{ active: selectedRange === 'week' }"
          (click)="selectRange('week')"
        >
          This Week
        </button>
        <button
          type="button"
          class="btn btn-dark"
          [ngClass]="{ active: selectedRange === 'month' }"
          (click)="selectRange('month')"
        >
          This Month
        </button>
        <button
          type="button"
          class="btn btn-dark"
          [ngClass]="{ active: selectedRange === 'year' }"
          (click)="selectRange('year')"
        >
          This Year
        </button>
      </div>
    </div>
  </div>
</div>

<div class="p-2">
  <!-- Dashboard Overview Section -->
  <div id="dashboard" class="section active">
    <!-- <div class="card p-4 mb-4 no-print">
      <div class="row justify-content-start align-items-center filter-tabs">
        <div class="col-12 d-flex flex-wrap align-items-center">
          <div class="col-md-6 d-flex align-items-center  ">
            <label class="me-3 fw-semibold no-print">Chart Type:</label>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="barChart"
                value="bar"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="barChart"
                >Bar</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="lineChart"
                value="line"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="lineChart"
                >Line</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="pieChart"
                value="pie"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="pieChart"
                >Pie</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="radarChart"
                value="radar"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="radarChart"
                >Radar</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="bubbleChart"
                value="bubble"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="bubbleChart"
                >Bubble</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="polarAreaChart"
                value="polarArea"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="polarAreaChart"
                >Polar Area</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="scatterChart"
                value="scatter"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="scatterChart"
                >Scatter</label
              >
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input no-print"
                type="radio"
                name="chartType"
                id="doughnutChart"
                value="doughnut"
                [(ngModel)]="chartType"
                (change)="computeTopMedicinesToday()"
              />
              <label class="form-check-label no-print" for="doughnutChart"
                >Doughnut</label
              >
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <div class="card">
      <div style="height: 400px">
        <canvas id="topMedicinesChart"></canvas>
      </div>
    </div>

       <div class="d-print-block">
      <div class="card p-3 mb-4">
      <!-- <table class="table">
        <thead>
          <th>Walk In</th>
          <th *ngIf="pharmapermisssion">OPD</th>
          <th>IPD</th>
        </thead>
        <tbody> -->
          <!-- opd walkin -->
          <!-- <td>
            <tr>
              <thead class="table-dark">
                <tr>
                  <th>TIME</th>
                  <th>Medicine Name</th>
                  <th>Number of Medicine</th>
                  <th>Total Number of Medicine</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let record of filteredwalkCases">
                  <td>{{ record.inwardSerialNumber }}</td>
                  <td>{{ record.createdAt | date : "shortTime" }}</td>

                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.medicineName }}
                      </li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.quantity }}
                      </li>
                    </ul>
                  </td>
                  <td class=" fw-bold">
                    {{ getTotalQuantity(record.packages) }}
                  </td>
                </tr>
                <tr class="table-warning">
                  <td colspan="3" class="fw-bold">Total Medicines</td>
                  <td class="fw-bold">
                    {{ getGrandTotalQuantity(filteredwalkCases) }}
                  </td>
                </tr>
              </tbody>
            </tr>
          </td> -->

          <!-- opd -->
        <!-- @if(pharmapermisssion){
  <td>
            <tr>
              <thead class="table-dark">
                <tr>
                  <th>TIME</th>
                  <th>Medicine Name</th>
                  <th>Number of Medicine</th>
                  <th>Total Number of Medicine</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let record of filteredCases">
                  <td>{{ record.inwardSerialNumber }}</td>
                  <td>{{ record.createdAt | date : "shortTime" }}</td>

                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.medicineName }}
                      </li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.quantity }}
                      </li>
                    </ul>
                  </td>
                  <td class="fw-bold">
                    {{ getTotalQuantity(record.packages) }}
                  </td>
                </tr>
                <tr class="table-warning">
                  <td colspan="3" class="fw-bold">Total Medicines</td>
                  <td class="fw-bold">
                    {{ getGrandTotalQuantity(filteredCases) }}
                  </td>
                </tr>
              </tbody>
            </tr>
          </td>
        } -->

          <!-- <td>
            <tr>
              <thead class="table-dark ">
                <tr>
                  <th>TIME</th>
                  <th>Medicine Name</th>
                  <th>Number of Medicine</th>
                  <th>Total Number of Medicine</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let record of filteredipdCases">
                  <td>{{ record.inwardSerialNumber }}</td>
                  <td>{{ record.createdAt | date : "shortTime" }}</td>

                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.medicineName }}
                      </li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li *ngFor="let med of record.packages">
                        {{ med.quantity }}
                      </li>
                    </ul>
                  </td>
                  <td class=" fw-bold">
                    {{ getTotalQuantity(record.packages) }}
                  </td>
                </tr>
                <tr class="table-warning">
                  <td colspan="3" class="fw-bold">Total Medicines</td>
                  <td class="fw-bold">
                    {{ getGrandTotalQuantity(filteredipdCases) }}
                  </td>
                </tr>
              </tbody>
            </tr>
          </td> -->

             <!-- @if(pharmapermisssion){ -->
          <tr class="table-warning text-center">
                <td colspan="3" class="fw-bold">Total Medicines</td>
                @if(pharmapermisssion){
                  <td class="fw-bold">{{ getWalkInTotal() + getOPDTotal() }}</td>
                } @else {
                  <td class="fw-bold">{{ getWalkInTotal()}}</td>
                }
              </tr>
            <!-- } -->
     <!--    </tbody>
      </table> -->
    </div>
  </div>
</div>
</div>

</div>

  <!-- Download Button -->
    <button (click)="downloadPDF()" class="btn btn-dark mb-3">Download</button>

</div>
